(()=>{"use strict";var e,o={75:(e,o,t)=>{const l=window.wp.blocks,n=window.React,a=window.wp.i18n,r=window.wp.element,s=window.wp.apiFetch;var c=t.n(s);const i=window.wp.blockEditor,m=window.wp.components,p=[{name:(0,a.__)("Success","wbcom-essential"),color:"#1CD991"},{name:(0,a.__)("Danger","wbcom-essential"),color:"#EF3E46"},{name:(0,a.__)("Primary","wbcom-essential"),color:"#3182ce"},{name:(0,a.__)("Secondary","wbcom-essential"),color:"#718096"},{name:(0,a.__)("Warning","wbcom-essential"),color:"#d69e2e"},{name:(0,a.__)("Info","wbcom-essential"),color:"#00b5d8"},{name:(0,a.__)("Light Gray","wbcom-essential"),color:"#DEDFE2"},{name:(0,a.__)("Dark","wbcom-essential"),color:"#122B46"},{name:(0,a.__)("Gray","wbcom-essential"),color:"#A3A5A9"},{name:(0,a.__)("White","wbcom-essential"),color:"#ffffff"}];function b({label:e,value:o,onChange:t}){const[l,s]=(0,r.useState)(!1);return(0,n.createElement)(m.BaseControl,{label:e,className:"wbcom-color-control"},(0,n.createElement)("div",{className:"wbcom-color-control-inner"},(0,n.createElement)(m.Button,{className:"wbcom-color-indicator",onClick:()=>s(!l),style:{backgroundColor:o||"#ccc"}}),o&&(0,n.createElement)(m.Button,{isSmall:!0,variant:"tertiary",onClick:()=>t("")},(0,a.__)("Clear","wbcom-essential")),l&&(0,n.createElement)(m.Popover,{position:"bottom left",onClose:()=>s(!1)},(0,n.createElement)("div",{style:{padding:"12px",minWidth:"200px"}},(0,n.createElement)(m.ColorPalette,{colors:p,value:o,onChange:e=>{t(e),s(!1)},clearable:!1})))))}const g=[{label:(0,a.__)("Circle","wbcom-essential"),value:"circle"},{label:(0,a.__)("Linear","wbcom-essential"),value:"linear"}],d=JSON.parse('{"UU":"wbcom-essential/profile-completion"}');(0,l.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:o}){const{skinStyle:t,alignment:l,hideWidget:s,showProfileBtn:p,profilePhoto:d,coverPhoto:w,profileGroups:u,profileGroupsInitialized:_,showHeading:h,showCompletionIcon:C,showCompletionStatus:E,headingText:f,completionText:v,completionButtonText:B,editButtonText:x,progressBorderWidth:y,completionColor:T,incompleteColor:k,ringBorderColor:P,ringNumColor:N,ringTextColor:S,detailsColor:O,buttonColor:I,buttonBgColor:D,buttonBorderColor:G}=e,[W,F]=(0,r.useState)([]),[A,H]=(0,r.useState)(!0),[L,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c()({path:"/wbcom-essential/v1/xprofile-groups"}).then(e=>{const t=e.fieldGroups||[];if(F(t),H(!1),!_&&t.length>0){const e={};t.forEach(o=>{e[o.id]=!0}),o({profileGroups:e,profileGroupsInitialized:!0})}}).catch(()=>{j(!0),H(!1)})},[]);const U=(0,i.useBlockProps)({className:`wbcom-essential-profile-completion wbcom-profile-completion-skin-${t} wbcom-profile-completion-align-${l}`,style:{"--progress-width":`${y}px`,"--completion-color":T,"--incomplete-color":k,"--ring-border-color":P,"--ring-num-color":N,"--ring-text-color":S,"--details-color":O,"--button-color":I,"--button-bg":D,"--button-border":G,"--progress-percent":65}});return(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.BlockControls,null,(0,n.createElement)(i.AlignmentToolbar,{value:l,onChange:e=>o({alignment:e})})),(0,n.createElement)(i.InspectorControls,null,(0,n.createElement)(m.PanelBody,{title:(0,a.__)("Layout","wbcom-essential"),initialOpen:!0},(0,n.createElement)(m.SelectControl,{label:(0,a.__)("Skin Style","wbcom-essential"),value:t,options:g,onChange:e=>o({skinStyle:e})}),(0,n.createElement)(m.ToggleControl,{label:(0,a.__)("Hide on 100% Complete","wbcom-essential"),checked:s,onChange:e=>o({hideWidget:e})}),(0,n.createElement)(m.ToggleControl,{label:(0,a.__)("Show Profile Button","wbcom-essential"),checked:p,onChange:e=>o({showProfileBtn:e})})),(0,n.createElement)(m.PanelBody,{title:(0,a.__)("Progress Items","wbcom-essential"),initialOpen:!1},(0,n.createElement)(m.ToggleControl,{label:(0,a.__)("Include Profile Photo","wbcom-essential"),checked:d,onChange:e=>o({profilePhoto:e}),help:(0,a.__)("Track profile photo upload in progress","wbcom-essential")}),(0,n.createElement)(m.ToggleControl,{label:(0,a.__)("Include Cover Photo","wbcom-essential"),checked:w,onChange:e=>o({coverPhoto:e}),help:(0,a.__)("Track cover photo upload in progress","wbcom-essential")}),A&&(0,n.createElement)("div",{style:{textAlign:"center",padding:"10px"}},(0,n.createElement)(m.Spinner,null),(0,n.createElement)("p",null,(0,a.__)("Loading field groups...","wbcom-essential"))),L&&(0,n.createElement)(m.Notice,{status:"warning",isDismissible:!1},(0,a.__)("Could not load xProfile groups. BuddyPress may not be active.","wbcom-essential")),!A&&!L&&W.length>0&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("p",{className:"components-base-control__help",style:{marginTop:"16px",marginBottom:"8px"}},(0,a.__)("xProfile Field Groups:","wbcom-essential")),W.map(e=>(0,n.createElement)(m.ToggleControl,{key:e.id,label:e.name,checked:u[e.id]||!1,onChange:()=>(e=>{const t={...u};t[e]=!t[e],o({profileGroups:t})})(e.id)}))),!A&&!L&&0===W.length&&(0,n.createElement)(m.Notice,{status:"info",isDismissible:!1},(0,a.__)("No xProfile field groups found. Create field groups in BuddyPress settings.","wbcom-essential"))),(0,n.createElement)(m.PanelBody,{title:(0,a.__)("Details Dropdown","wbcom-essential"),initialOpen:!1},"circle"===t&&(0,n.createElement)(m.ToggleControl,{label:(0,a.__)("Show Heading","wbcom-essential"),checked:h,onChange:e=>o({showHeading:e})}),(0,n.createElement)(m.ToggleControl,{label:(0,a.__)("Show Completion Icon","wbcom-essential"),checked:C,onChange:e=>o({showCompletionIcon:e})}),(0,n.createElement)(m.ToggleControl,{label:(0,a.__)("Show Completion Status","wbcom-essential"),checked:E,onChange:e=>o({showCompletionStatus:e})})),(0,n.createElement)(m.PanelBody,{title:(0,a.__)("Labels","wbcom-essential"),initialOpen:!1},"linear"===t&&(0,n.createElement)(m.TextControl,{label:(0,a.__)("Heading Text","wbcom-essential"),value:f,onChange:e=>o({headingText:e})}),(0,n.createElement)(m.TextControl,{label:(0,a.__)("Completion Text","wbcom-essential"),value:v,onChange:e=>o({completionText:e})}),p&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(m.TextControl,{label:(0,a.__)("Complete Button Text","wbcom-essential"),value:B,onChange:e=>o({completionButtonText:e}),help:(0,a.__)("Shown when progress is below 100%","wbcom-essential")}),(0,n.createElement)(m.TextControl,{label:(0,a.__)("Edit Button Text","wbcom-essential"),value:x,onChange:e=>o({editButtonText:e}),help:(0,a.__)("Shown when progress is 100%","wbcom-essential")}))),(0,n.createElement)(m.PanelBody,{title:(0,a.__)("Progress Style","wbcom-essential"),initialOpen:!1},(0,n.createElement)(m.RangeControl,{label:(0,a.__)("Progress Border Width (px)","wbcom-essential"),value:y,onChange:e=>o({progressBorderWidth:e}),min:3,max:12})),(0,n.createElement)(m.PanelBody,{title:(0,a.__)("Colors","wbcom-essential"),initialOpen:!1},(0,n.createElement)(b,{label:(0,a.__)("Completion Color","wbcom-essential"),value:T,onChange:e=>o({completionColor:e})}),(0,n.createElement)(b,{label:(0,a.__)("Incomplete Color","wbcom-essential"),value:k,onChange:e=>o({incompleteColor:e})}),(0,n.createElement)(b,{label:(0,a.__)("Progress Background","wbcom-essential"),value:P,onChange:e=>o({ringBorderColor:e})}),(0,n.createElement)(b,{label:(0,a.__)("Number Color","wbcom-essential"),value:N,onChange:e=>o({ringNumColor:e})}),(0,n.createElement)(b,{label:(0,a.__)("Text Color","wbcom-essential"),value:S,onChange:e=>o({ringTextColor:e})}),(0,n.createElement)(b,{label:(0,a.__)("Details Background","wbcom-essential"),value:O,onChange:e=>o({detailsColor:e})})),(0,n.createElement)(m.PanelBody,{title:(0,a.__)("Button Style","wbcom-essential"),initialOpen:!1},(0,n.createElement)(b,{label:(0,a.__)("Button Color","wbcom-essential"),value:I,onChange:e=>o({buttonColor:e})}),(0,n.createElement)(b,{label:(0,a.__)("Button Background","wbcom-essential"),value:D,onChange:e=>o({buttonBgColor:e})}),(0,n.createElement)(b,{label:(0,a.__)("Button Border","wbcom-essential"),value:G,onChange:e=>o({buttonBorderColor:e})}))),(0,n.createElement)("div",{...U},(0,n.createElement)("div",{className:"wbcom-profile-completion-wrapper"},"circle"===t?(0,n.createElement)("div",{className:"wbcom-profile-completion-circle"},(0,n.createElement)("div",{className:"wbcom-progress-ring"},(0,n.createElement)("div",{className:"wbcom-progress-ring-inner"}),(0,n.createElement)("div",{className:"wbcom-progress-data"},(0,n.createElement)("span",{className:"wbcom-progress-num"},65,(0,n.createElement)("span",null,"%")),(0,n.createElement)("span",{className:"wbcom-progress-text"},v)))):(0,n.createElement)("div",{className:"wbcom-profile-completion-linear"},(0,n.createElement)("div",{className:"wbcom-progress-header"},(0,n.createElement)("h3",null,f),(0,n.createElement)("span",{className:"dashicons dashicons-arrow-right-alt2"})),(0,n.createElement)("div",{className:"wbcom-progress-bar"},(0,n.createElement)("div",{className:"wbcom-progress-bar-fill",style:{width:"65%"}})),(0,n.createElement)("div",{className:"wbcom-progress-info"},(0,n.createElement)("span",{className:"wbcom-progress-num"},65,"%"),(0,n.createElement)("span",{className:"wbcom-progress-text"},v))),p&&(0,n.createElement)("div",{className:"wbcom-profile-completion-button"},(0,n.createElement)("span",{className:"wbcom-profile-button"},B,(0,n.createElement)("span",{className:"dashicons dashicons-arrow-right-alt2"}))))))},save:function(){return null}})}},t={};function l(e){var n=t[e];if(void 0!==n)return n.exports;var a=t[e]={exports:{}};return o[e](a,a.exports,l),a.exports}l.m=o,e=[],l.O=(o,t,n,a)=>{if(!t){var r=1/0;for(m=0;m<e.length;m++){for(var[t,n,a]=e[m],s=!0,c=0;c<t.length;c++)(!1&a||r>=a)&&Object.keys(l.O).every(e=>l.O[e](t[c]))?t.splice(c--,1):(s=!1,a<r&&(r=a));if(s){e.splice(m--,1);var i=n();void 0!==i&&(o=i)}}return o}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[t,n,a]},l.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return l.d(o,{a:o}),o},l.d=(e,o)=>{for(var t in o)l.o(o,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={57:0,350:0};l.O.j=o=>0===e[o];var o=(o,t)=>{var n,a,[r,s,c]=t,i=0;if(r.some(o=>0!==e[o])){for(n in s)l.o(s,n)&&(l.m[n]=s[n]);if(c)var m=c(l)}for(o&&o(t);i<r.length;i++)a=r[i],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(m)},t=globalThis.webpackChunkwbcom_essential_profile_completion=globalThis.webpackChunkwbcom_essential_profile_completion||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var n=l.O(void 0,[350],()=>l(75));n=l.O(n)})();