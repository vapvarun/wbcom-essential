document.addEventListener("DOMContentLoaded",()=>{"undefined"!=typeof wbcomEssentialLogin&&document.querySelectorAll('.wbcom-essential-login-form__form[data-ajax="true"]').forEach(e=>{e.addEventListener("submit",async t=>{t.preventDefault();const s=e.querySelector(".wbcom-essential-login-form__message"),n=e.querySelector(".wbcom-essential-login-form__button"),a=n.querySelector(".wbcom-essential-login-form__button-text"),o=n.querySelector(".wbcom-essential-login-form__button-loading"),d=new FormData(e);d.append("action","wbcom_essential_ajax_login"),n.disabled=!0,a.hidden=!0,o.hidden=!1,s.hidden=!0,s.classList.remove("is-error","is-success");try{const e=await fetch(wbcomEssentialLogin.ajaxUrl,{method:"POST",body:d,credentials:"same-origin"}),t=await e.json();t.success?(s.textContent=t.data.message,s.classList.add("is-success"),s.hidden=!1,setTimeout(()=>{window.location.href=t.data.redirect},500)):(s.textContent=t.data.message||"An error occurred. Please try again.",s.classList.add("is-error"),s.hidden=!1,n.disabled=!1,a.hidden=!1,o.hidden=!0)}catch(e){s.textContent="An error occurred. Please try again.",s.classList.add("is-error"),s.hidden=!1,n.disabled=!1,a.hidden=!1,o.hidden=!0}})})});