document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".wbcom-essential-portfolio-grid").forEach(function(t){const e=t.querySelectorAll(".wbcom-portfolio-filter"),o=t.querySelectorAll(".wbcom-layout-btn"),i=t.querySelector(".wbcom-portfolio-items"),n=t.querySelectorAll(".wbcom-portfolio-item"),s="true"===t.getAttribute("data-lightbox");if(e.forEach(function(t){t.addEventListener("click",function(){const t=this.getAttribute("data-filter");e.forEach(function(t){t.classList.remove("is-active"),t.setAttribute("aria-selected","false")}),this.classList.add("is-active"),this.setAttribute("aria-selected","true"),n.forEach(function(t){t.classList.add("is-filtering")}),requestAnimationFrame(function(){n.forEach(function(e){const o=(e.getAttribute("data-filters")||"").split(" ").filter(Boolean);"all"===t||o.includes(t)?e.classList.remove("is-hidden"):e.classList.add("is-hidden")}),setTimeout(function(){n.forEach(function(t){t.classList.remove("is-filtering")})},400)})})}),o.forEach(function(e){e.addEventListener("click",function(){const e=this.getAttribute("data-layout");o.forEach(function(t){t.classList.remove("is-active")}),this.classList.add("is-active"),i&&(i.classList.remove("layout-grid","layout-list"),i.classList.add("layout-"+e)),t.setAttribute("data-layout",e)})}),"IntersectionObserver"in window){const t=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){const o=e.target,i=Array.from(n).filter(function(t){return!t.classList.contains("is-hidden")}).indexOf(o);setTimeout(function(){o.classList.add("is-visible")},50*i),t.unobserve(o)}})},{threshold:.1,rootMargin:"0px 0px -30px 0px"});n.forEach(function(e){e.classList.contains("is-hidden")||t.observe(e)})}else n.forEach(function(t){t.classList.add("is-visible")});s&&function(t){const e=t.querySelector(".wbcom-portfolio-lightbox"),o=t.querySelectorAll(".wbcom-portfolio-lightbox-btn"),i=t.querySelector(".wbcom-portfolio-lightbox-overlay"),n=t.querySelector(".wbcom-portfolio-lightbox-close"),s=t.querySelector(".wbcom-portfolio-lightbox-prev"),c=t.querySelector(".wbcom-portfolio-lightbox-next"),r=t.querySelector(".wbcom-portfolio-lightbox-image"),l=t.querySelector(".wbcom-portfolio-lightbox-caption");if(!e||!o.length)return;let a=0,d=[];function u(){d=[],t.querySelectorAll(".wbcom-portfolio-item:not(.is-hidden)").forEach(function(t){const e=t.querySelector(".wbcom-portfolio-lightbox-btn");e&&d.push({src:e.getAttribute("data-src"),title:e.getAttribute("data-title")||""})})}function f(){e.classList.remove("is-open"),e.setAttribute("aria-hidden","true"),document.body.style.overflow=""}function h(){if(0===d.length)return;const t=d[a];r.classList.remove("is-loaded"),r.src=t.src,r.alt=t.title,l.textContent=t.title,r.onload=function(){r.classList.add("is-loaded")},d.length<=1?(s.style.display="none",c.style.display="none"):(s.style.display="",c.style.display="")}function b(){a=(a+1)%d.length,h()}function m(){a=(a-1+d.length)%d.length,h()}o.forEach(function(t,o){t.addEventListener("click",function(o){o.preventDefault(),o.stopPropagation(),u();const i=t.getAttribute("data-src"),s=d.findIndex(function(t){return t.src===i});!function(t){u(),0!==d.length&&(a=t,h(),e.classList.add("is-open"),e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",n.focus())}(s>=0?s:0)})}),i&&i.addEventListener("click",f),n&&n.addEventListener("click",f),s&&s.addEventListener("click",m),c&&c.addEventListener("click",b),document.addEventListener("keydown",function(t){if(e.classList.contains("is-open"))switch(t.key){case"Escape":f();break;case"ArrowLeft":m();break;case"ArrowRight":b()}});let y=0,g=0;e.addEventListener("touchstart",function(t){y=t.changedTouches[0].screenX},{passive:!0}),e.addEventListener("touchend",function(t){g=t.changedTouches[0].screenX,function(){const t=y-g;Math.abs(t)>50&&(t>0?b():m())}()},{passive:!0});t.querySelectorAll(".wbcom-portfolio-filter").forEach(function(t){t.addEventListener("click",function(){setTimeout(function(){u()},100)})})}(t)})});