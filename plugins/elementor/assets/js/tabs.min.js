!function(e){"use strict";var n={defaults:{accessibility:!0,trigger:".wbaccordion__head",content:".wbaccordion__body",openClass:"is-open",animation:"slide",openSpeed:200,closeSpeed:200,scroll:!1,scrollSpeed:400,scrollOffset:0,openSingle:!1,stayOpen:null,selfBlock:!1,selfClose:!1,hash:!0,breakpoints:null,onInit:null,onOpen:null,onClose:null,onScroll:null},id:0};n.methods={_getVars:function(t){var o=e.extend(!0,{},t.data("wbaccordion"),t.data("wbaccordion-options"));return o.breakpoints?n.methods._getResponsiveVars(o):o},_getResponsiveVars:function(n){var t=window.innerWidth||e(window).width();return n.breakpoints.sort(function(e,n){return e.breakpoint<n.breakpoint?-1:e.breakpoint>n.breakpoint?1:0}),e.each(n.breakpoints,function(o,i){t>=i.breakpoint&&(n=e.extend({},n,i.settings))}),n},_animation:function(e,n,t,o){switch(e){case"slideDown":n.slideDown(t,o);break;case"slideUp":n.slideUp(t,o);break;case"fadeIn":n.fadeIn(t,o);break;case"fadeOut":n.fadeOut(t,o);break;case"show":n.show(t,o);break;case"hide":n.hide(t,o)}},_close:function(e,n){var t=e.find(n.content+":first"),o=e.find(n.trigger+":first");e.removeClass(n.openClass),t.hide().css("overflow",""),n.accessibility&&(t.attr("hidden",!0),o.attr("aria-expanded",!1).removeAttr("aria-disabled"))},_open:function(e,n){var t=e.find(n.content+":first"),o=e.find(n.trigger+":first");e.addClass(n.openClass),t.show().css("overflow","hidden"),n.accessibility&&(t.attr("hidden",!1),o.attr("aria-expanded",!0),n.selfBlock&&o.attr("aria-disabled",!0))},_getStayOpen:function(e,n){var t;if("number"==typeof n)t=e.eq(n);else if("string"==typeof n)switch(n){case"first":t=e.first();break;case"last":t=e.last();break;default:t=e.filter(n)}return t},_openSingle:function(t,o,i){if(i.openSingle){var s=t.not(o);null!==i.stayOpen&&(s=s.not(n.methods._getStayOpen(t,i.stayOpen))),t.close(s.filter(function(){return!e(this).find(o).length}))}},_addSelfCloseEvent:function(t,o){o.selfClose&&e(document).on("click",function(i){if(!e(i.target).closest(t).length){var s=t.filter("."+o.openClass);null!==o.stayOpen&&(s=s.not(n.methods._getStayOpen(t,o.stayOpen))),s.length&&t.close(s)}})},_addHashchangeEvent:function(n,t){if(t.hash){var o=function(){var e=n.filter(window.location.hash);e.length&&!e.hasClass(t.openClass)&&n.click(e)};o(),e(window).on("hashchange",o)}},_initAccessibility:function(e,t){var o=e.find(t.trigger+":first"),i="acc"+n.id++,s=i+"id",a=o.children("button");return t.accessibility&&(o.is("button")||o.is("a")?a=o:(o.children("button").length||(o.wrapInner('<button type="button" aria-controls="'+i+'" aria-expanded="false" id="'+s+'"></button>'),a=o.children("button")),t.trigger+=" > button"),a.attr("aria-controls",i).attr("aria-expanded",!1).attr("id",s),e.find(t.content+":first").attr("aria-labelledby",s).attr("id",i).attr("role","region")),t}},e.fn.wbaccordion=function(t){var o=this;return this.open=function(t,i){return t&&t.length||(t=o),t.each(function(){var s=e(this),a=n.methods._getVars(s),r=s.find(a.content+":first"),l="slide"===a.animation?"slideDown":"fade"===a.animation?"fadeIn":"show";n.methods._openSingle(o,t,a),n.methods._animation(l,r,a.openSpeed,function(){n.methods._open(s,a),a.scroll&&o.scroll(t),i&&"function"==typeof i&&i(s),a.onOpen&&"function"==typeof a.onOpen&&a.onOpen(s)})}),o},this.close=function(t,i){return t&&t.length||(t=o),t.each(function(){var t=e(this),o=n.methods._getVars(t),s=t.find(o.content+":first"),a="slide"===o.animation?"slideUp":"fade"===o.animation?"fadeOut":"hide";n.methods._animation(a,s,o.closeSpeed,function(){n.methods._close(t,o),i&&"function"==typeof i&&i(t),o.onClose&&"function"==typeof o.onClose&&o.onClose(t)})}),o},this.scroll=function(t){var i=n.methods._getVars(t);return e("html, body").animate({scrollTop:t.offset().top+i.scrollOffset},i.scrollSpeed).promise().done(function(){i.onScroll&&"function"==typeof i.onScroll&&i.onScroll(t)}),o},this.click=function(e){var t=n.methods._getVars(e);return e.hasClass(t.openClass)?t.selfBlock||o.close(e):o.open(e),o},this.each(function(i,s){var a=e(s),r=n.methods._initAccessibility(a,e.extend({},n.defaults,t,a.data("wbaccordion-options")));a.data("wbaccordion")||(a.data("wbaccordion",r),r.breakpoints&&(r=n.methods._getResponsiveVars(r)),(a.is("."+r.openClass)||null!==r.stayOpen&&a.is(n.methods._getStayOpen(o,r.stayOpen)))&&n.methods._open(a,r),n.methods._close(a.not("."+r.openClass),r),r.onInit&&"function"==typeof r.onInit&&r.onInit(a),a.on("click",r.trigger+":first",function(e){e.preventDefault(),o.click(a)}),i===o.length-1&&(n.methods._addHashchangeEvent(o,r),n.methods._addSelfCloseEvent(o,r)))})}}(jQuery);