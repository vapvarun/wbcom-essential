/**
 * Mini Cart Block - Frontend Styles
 */
.wbcom-essential-mini-cart {
	// Layout.
	--icon-size: 24px;

	// Default colors (static fallbacks for custom color mode).
	--icon-color: inherit;
	--count-bg-color: #e53935;
	--count-text-color: #fff;
	--total-color: inherit;
	--dropdown-bg: #fff;

	/**
	 * Theme Colors Mode
	 * Maps theme CSS variables to block-specific variables.
	 */
	&.use-theme-colors {
		--icon-color: var(--wbcom-heading-color, var(--wbcom-color-contrast, inherit));
		--count-bg-color: var(--wbcom-color-primary, #e53935);
		--count-text-color: var(--wbcom-button-text, var(--wbcom-color-base, #fff));
		--total-color: var(--wbcom-heading-color, var(--wbcom-color-contrast, inherit));
		--dropdown-bg: var(--wbcom-card-bg, var(--wbcom-color-base, #fff));
	}

	position: relative;
	display: inline-block;

	&__trigger {
		display: inline-flex;
		align-items: center;
		gap: 8px;
		text-decoration: none;
		color: inherit;
		cursor: pointer;

		&:hover {
			opacity: 0.8;
		}
	}

	&__icon {
		display: inline-flex;
		align-items: center;
		justify-content: center;

		.dashicons {
			font-size: var(--icon-size);
			width: var(--icon-size);
			height: var(--icon-size);
			color: var(--icon-color);
		}
	}

	&__count {
		position: absolute;
		top: -8px;
		right: -8px;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		min-width: 18px;
		height: 18px;
		padding: 0 4px;
		background: var(--count-bg-color);
		color: var(--count-text-color);
		font-size: 11px;
		font-weight: 600;
		line-height: 1;
		border-radius: 50px;
	}

	&__total {
		color: var(--total-color);
		font-weight: 600;
		font-size: 14px;
	}

	// Side Drawer
	&__drawer {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 999999;
		visibility: hidden;
		opacity: 0;
		transition: visibility 0s linear 0.3s, opacity 0.3s ease;

		&[aria-hidden="false"] {
			visibility: visible;
			opacity: 1;
			transition: visibility 0s linear 0s, opacity 0.3s ease;

			.wbcom-essential-mini-cart__drawer-content {
				transform: translateX(0);
			}
		}
	}

	&__drawer-overlay {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.5);
		cursor: pointer;
	}

	&__drawer-content {
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		width: 100%;
		max-width: 450px;
		background: var(--dropdown-bg, #fff);
		box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
		display: flex;
		flex-direction: column;
		transform: translateX(100%);
		transition: transform 0.3s ease;
	}

	&__drawer-header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 20px 24px;
		border-bottom: 1px solid #e5e5e5;
		flex-shrink: 0;
	}

	&__drawer-title {
		margin: 0;
		font-size: 18px;
		font-weight: 600;
		color: #333;
	}

	&__drawer-close {
		display: flex;
		align-items: center;
		gap: 8px;
		background: none;
		border: none;
		cursor: pointer;
		font-size: 14px;
		color: #666;
		padding: 8px;
		margin: -8px;
		transition: color 0.2s ease;

		&:hover {
			color: #333;
		}

		.close-text {
			font-weight: 500;
		}

		.close-icon {
			font-size: 18px;
			line-height: 1;
		}
	}

	&__drawer-body {
		flex: 1;
		overflow-y: auto;
		padding: 0;

		// WooCommerce mini cart styles
		.widget_shopping_cart_content {
			height: 100%;
			display: flex;
			flex-direction: column;

			.woocommerce-mini-cart {
				list-style: none;
				margin: 0;
				padding: 16px 24px;
				flex: 1;
				overflow-y: auto;
			}

			.woocommerce-mini-cart-item {
				display: flex;
				align-items: flex-start;
				gap: 12px;
				padding: 16px 0;
				border-bottom: 1px solid #eee;
				position: relative;

				&:last-child {
					border-bottom: none;
				}

				a.remove {
					position: absolute;
					top: 16px;
					left: 0;
					width: 20px;
					height: 20px;
					display: flex;
					align-items: center;
					justify-content: center;
					background: #f5f5f5;
					border-radius: 50%;
					text-decoration: none;
					font-size: 16px;
					line-height: 1;
					color: #999;
					transition: all 0.2s ease;

					&:hover {
						background: #e53935;
						color: #fff;
					}
				}

				> a:not(.remove) {
					display: flex;
					align-items: center;
					gap: 12px;
					text-decoration: none;
					color: inherit;
					flex: 1;
					padding-left: 28px;

					img {
						width: 60px;
						height: 60px;
						object-fit: cover;
						border-radius: 4px;
						flex-shrink: 0;
					}
				}

				.quantity {
					display: block;
					font-size: 13px;
					color: #666;
					margin-top: 4px;
				}
			}

			.woocommerce-mini-cart__total {
				padding: 16px 24px;
				border-top: 1px solid #e5e5e5;
				display: flex;
				justify-content: space-between;
				font-size: 16px;
				font-weight: 600;

				strong {
					font-weight: 600;
				}
			}

			.woocommerce-mini-cart__buttons {
				padding: 16px 24px;
				display: flex;
				flex-direction: column;
				gap: 10px;

				.button {
					display: block;
					width: 100%;
					padding: 14px 20px;
					text-align: center;
					text-decoration: none;
					font-size: 14px;
					font-weight: 600;
					border-radius: 4px;
					transition: all 0.2s ease;
					border: none;
					cursor: pointer;

					&.wc-forward:not(.checkout) {
						background: #f5f5f5;
						color: #333;

						&:hover {
							background: #eee;
						}
					}

					&.checkout {
						background: #e53935;
						color: #fff;

						&:hover {
							background: #c62828;
						}
					}
				}
			}

			.woocommerce-mini-cart__empty-message {
				text-align: center;
				padding: 48px 24px;
				color: #666;
			}
		}
	}

	// Responsive
	@media (max-width: 480px) {
		&__drawer-content {
			max-width: 100%;
		}
	}
}

// Body scroll lock when drawer is open
body.mini-cart-drawer-open {
	overflow: hidden;
}
