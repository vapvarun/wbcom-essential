/**
 * Progress Bar Block - Frontend Styles
 *
 * @package wbcom-essential
 */

.wbcom-essential-progress-bar {
	// Layout
	--bar-height: 20px;
	--bar-radius: 4px;

	// Default color fallbacks (used when custom colors applied via inline styles).
	--title-color: #1a202c;
	--percent-color: #1a202c;
	--bar-bg: #e2e8f0;
	--fill-bg: #3182ce;
	--fill-text: #ffffff;

	/**
	 * Theme Colors Mode
	 * Maps theme CSS variables to block-specific variables.
	 */
	&.use-theme-colors {
		--title-color: var(--wbcom-heading-color, var(--wbcom-color-contrast, #1a202c));
		--percent-color: var(--wbcom-heading-color, var(--wbcom-color-contrast, #1a202c));
		--bar-bg: var(--wbcom-border-color, var(--wbcom-color-base-2, #e2e8f0));
		--fill-bg: var(--wbcom-color-primary, #3182ce);
		--fill-text: var(--wbcom-button-text, var(--wbcom-color-base, #ffffff));

		// Apply theme colors to elements.
		.wbcom-progress-bar-title {
			color: var(--title-color);
		}

		.wbcom-progress-bar-percent-out {
			color: var(--percent-color);
		}

		.wbcom-progress-bar-wrapper {
			background-color: var(--bar-bg);
		}

		.wbcom-progress-bar-fill {
			background-color: var(--fill-bg);
		}

		.wbcom-progress-bar-percent-in {
			color: var(--fill-text);
		}
	}

	margin-bottom: 1.5rem;

	.wbcom-progress-bar-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
		margin-bottom: 8px;
	}

	.wbcom-progress-bar-title {
		font-size: 1rem;
		font-weight: 600;
	}

	.wbcom-progress-bar-percent-out {
		font-size: 1rem;
		font-weight: 700;
	}

	.wbcom-progress-bar-wrapper {
		position: relative;
		overflow: hidden;
		border-radius: var(--bar-radius);
		height: var(--bar-height);
	}

	.wbcom-progress-bar-fill {
		position: relative;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: flex-end;
		padding-right: 8px;
		box-sizing: border-box;

		// Stripes pattern
		&.has-stripes {
			background-image: linear-gradient(
				45deg,
				rgba(255, 255, 255, 0.15) 25%,
				transparent 25%,
				transparent 50%,
				rgba(255, 255, 255, 0.15) 50%,
				rgba(255, 255, 255, 0.15) 75%,
				transparent 75%,
				transparent
			);
			background-size: 1rem 1rem;
		}

		// Animated stripes
		&.stripes-animated {
			animation: wbcom-progress-stripes 1s linear infinite;
		}
	}

	.wbcom-progress-bar-percent-in {
		font-size: 0.75rem;
		font-weight: 700;
		white-space: nowrap;
	}
}

// Stripes animation
@keyframes wbcom-progress-stripes {
	0% {
		background-position: 1rem 0;
	}
	100% {
		background-position: 0 0;
	}
}
