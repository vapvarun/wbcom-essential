/**
 * Flip Box Block - Frontend Styles
 *
 * @package wbcom-essential
 */

.wbcom-essential-flip-box {
	// Layout
	--flip-box-width: 300px;
	--flip-box-height: 300px;
	--flip-box-align: center;
	--flip-duration: 0.6s;
	--flip-timing: ease;
	--flip-front-icon-size: 48px;
	--flip-back-icon-size: 48px;
	--flip-radius: 8px;
	// Default colors (fallbacks when using inline styles)
	--flip-front-bg: #f5f5f5;
	--flip-front-title: #1a1a1a;
	--flip-front-content: #666666;
	--flip-front-icon: #3182ce;
	--flip-back-bg: #3182ce;
	--flip-back-title: #ffffff;
	--flip-back-content: rgba(255, 255, 255, 0.9);
	--flip-back-icon: #ffffff;
	--flip-btn-bg: #ffffff;
	--flip-btn-text: #3182ce;
	--flip-btn-hover-bg: #2c5aa0;
	--flip-btn-hover-text: #ffffff;
	--flip-front-border-color: #e0e0e0;
	--flip-back-border-color: #e0e0e0;

	/**
	 * Theme Colors Mode
	 * Maps theme CSS variables to block-specific variables
	 */
	&.use-theme-colors {
		--flip-front-bg: var(--wbcom-card-bg-alt, var(--wbcom-color-base-2, #f5f5f5));
		--flip-front-title: var(--wbcom-heading-color, var(--wbcom-color-contrast, #1a1a1a));
		--flip-front-content: var(--wbcom-text-color, var(--wbcom-color-contrast-2, #666666));
		--flip-front-icon: var(--wbcom-color-primary, #3182ce);
		--flip-back-bg: var(--wbcom-color-primary, #3182ce);
		--flip-back-title: var(--wbcom-button-text, var(--wbcom-color-base, #ffffff));
		--flip-back-content: var(--wbcom-button-text, rgba(255, 255, 255, 0.9));
		--flip-back-icon: var(--wbcom-button-text, var(--wbcom-color-base, #ffffff));
		--flip-btn-bg: var(--wbcom-card-bg, var(--wbcom-color-base, #ffffff));
		--flip-btn-text: var(--wbcom-color-primary, #3182ce);
		--flip-btn-hover-bg: var(--wbcom-color-primary-dark, var(--wbcom-color-secondary, #2c5aa0));
		--flip-btn-hover-text: var(--wbcom-button-text, var(--wbcom-color-base, #ffffff));
		--flip-front-border-color: var(--wbcom-border-color, var(--wbcom-color-border, #e0e0e0));
		--flip-back-border-color: var(--wbcom-border-color, var(--wbcom-color-border, #e0e0e0));
	}

	display: flex;
	justify-content: var(--flip-box-align);
}

// Wrapper with 3D perspective
.wbcom-flip-box-wrapper {
	perspective: 1000px;
	width: 100%;
	max-width: var(--flip-box-width);
	height: var(--flip-box-height);
}

// Inner container with 3D transform
.wbcom-flip-box-inner {
	position: relative;
	width: 100%;
	height: 100%;
	transform-style: preserve-3d;
	transition-duration: var(--flip-duration);
	transition-timing-function: var(--flip-timing);
	cursor: pointer;
}

// Shared styles for front and back
.wbcom-flip-box-front,
.wbcom-flip-box-back {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	backface-visibility: hidden;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: 24px;
	box-sizing: border-box;
	border-radius: var(--flip-radius);
	text-align: center;
	overflow: hidden;
}

// Front side
.wbcom-flip-box-front {
	z-index: 2;
	background: var(--flip-front-bg);

	.wbcom-flip-box-icon {
		color: var(--flip-front-icon);

		.dashicons {
			font-size: var(--flip-front-icon-size);
			width: var(--flip-front-icon-size);
			height: var(--flip-front-icon-size);
		}
	}

	.wbcom-flip-box-title {
		color: var(--flip-front-title);
	}

	.wbcom-flip-box-content {
		color: var(--flip-front-content);
	}
}

// Back side (default rotation for flip-right)
.wbcom-flip-box-back {
	background: var(--flip-back-bg);
	transform: rotateY(180deg);

	.wbcom-flip-box-icon {
		color: var(--flip-back-icon);

		.dashicons {
			font-size: var(--flip-back-icon-size);
			width: var(--flip-back-icon-size);
			height: var(--flip-back-icon-size);
		}
	}

	.wbcom-flip-box-title {
		color: var(--flip-back-title);
	}

	.wbcom-flip-box-content {
		color: var(--flip-back-content);
	}
}

// Icon styling
.wbcom-flip-box-icon {
	margin-bottom: 16px;
	display: flex;
	align-items: center;
	justify-content: center;
}

// Title styling
.wbcom-flip-box-title {
	margin: 0 0 12px;
	font-size: 1.25rem;
	font-weight: 600;
	line-height: 1.3;
}

// Content styling
.wbcom-flip-box-content {
	margin: 0 0 16px;
	font-size: 0.9375rem;
	line-height: 1.6;
}

// Button styling
.wbcom-flip-box-button {
	display: inline-block;
	padding: 10px 24px;
	background: var(--flip-btn-bg);
	color: var(--flip-btn-text);
	text-decoration: none;
	font-weight: 500;
	border-radius: 4px;
	transition: all 0.3s ease;
	margin-top: auto;
	position: relative;
	z-index: 1;
	overflow: hidden;

	&:hover {
		background: var(--flip-btn-hover-bg);
		color: var(--flip-btn-hover-text);
		transform: translateY(-2px);
		box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
	}
}

// ============================================
// Flip Directions
// ============================================

// Flip Right (default)
.wbcom-flip-box-wrapper.flip-right {
	.wbcom-flip-box-back {
		transform: rotateY(180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotateY(180deg);
	}
}

// Flip Left
.wbcom-flip-box-wrapper.flip-left {
	.wbcom-flip-box-back {
		transform: rotateY(-180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotateY(-180deg);
	}
}

// Flip Up
.wbcom-flip-box-wrapper.flip-up {
	.wbcom-flip-box-back {
		transform: rotateX(180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotateX(180deg);
	}
}

// Flip Down
.wbcom-flip-box-wrapper.flip-down {
	.wbcom-flip-box-back {
		transform: rotateX(-180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotateX(-180deg);
	}
}

// Flip Diagonal Right
.wbcom-flip-box-wrapper.flip-diagonal-right {
	.wbcom-flip-box-back {
		transform: rotate3d(1, 1, 0, 180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotate3d(1, 1, 0, 180deg);
	}
}

// Flip Diagonal Left
.wbcom-flip-box-wrapper.flip-diagonal-left {
	.wbcom-flip-box-back {
		transform: rotate3d(1, 1, 0, -180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotate3d(1, 1, 0, -180deg);
	}
}

// Flip Inverted Diagonal Right
.wbcom-flip-box-wrapper.flip-inverted-diagonal-right {
	.wbcom-flip-box-back {
		transform: rotate3d(-1, 1, 0, 180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotate3d(-1, 1, 0, 180deg);
	}
}

// Flip Inverted Diagonal Left
.wbcom-flip-box-wrapper.flip-inverted-diagonal-left {
	.wbcom-flip-box-back {
		transform: rotate3d(1, -1, 0, 180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotate3d(1, -1, 0, 180deg);
	}
}

// Zoom In
.wbcom-flip-box-wrapper.zoom-in {
	.wbcom-flip-box-front {
		z-index: 2;
	}

	.wbcom-flip-box-back {
		transform: scale(0);
		opacity: 0;
		z-index: 1;
	}

	&:hover .wbcom-flip-box-inner {
		.wbcom-flip-box-front {
			transform: scale(0);
			opacity: 0;
		}

		.wbcom-flip-box-back {
			transform: scale(1);
			opacity: 1;
		}
	}
}

// Zoom Out
.wbcom-flip-box-wrapper.zoom-out {
	.wbcom-flip-box-front {
		z-index: 2;
	}

	.wbcom-flip-box-back {
		transform: scale(2);
		opacity: 0;
		z-index: 1;
	}

	&:hover .wbcom-flip-box-inner {
		.wbcom-flip-box-front {
			transform: scale(2);
			opacity: 0;
		}

		.wbcom-flip-box-back {
			transform: scale(1);
			opacity: 1;
		}
	}
}

// Rotate
.wbcom-flip-box-wrapper.rotate {
	.wbcom-flip-box-back {
		transform: rotateY(180deg) rotateZ(180deg);
	}

	&:hover .wbcom-flip-box-inner {
		transform: rotateY(180deg) rotateZ(180deg);
	}
}

// ============================================
// Border & Shadow
// ============================================
.wbcom-flip-box-front,
.wbcom-flip-box-back {
	border-style: solid;
}

.wbcom-flip-box-front {
	border-width: var(--flip-front-border-width);
	border-color: var(--flip-front-border-color);
}

.wbcom-flip-box-back {
	border-width: var(--flip-back-border-width);
	border-color: var(--flip-back-border-color);
}

.wbcom-flip-box-front.has-box-shadow {
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.wbcom-flip-box-back.has-box-shadow {
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

// ============================================
// Button Animation Skins
// ============================================

// Base for button animations
.wbcom-flip-box-button[class*="wbcom-btn-"] {
	position: relative;
	overflow: hidden;
	z-index: 0;

	&::before {
		position: absolute;
		content: "";
		z-index: -1;
		background: var(--flip-btn-hover-bg);
	}
}

// Animation 1 - Rotate in
.wbcom-flip-box-button.wbcom-btn-1::before {
	width: 200%;
	height: 150%;
	opacity: 0;
	left: -50%;
	bottom: 0;
	transform-origin: left bottom;
	transform: rotate(-90deg);
	transition: transform 0.6s cubic-bezier(0.01, -0.24, 0, 0.68), opacity 0.6s;
}

.wbcom-flip-box-button.wbcom-btn-1:hover::before {
	transform: rotate(0deg);
	opacity: 1;
	transition-duration: 0.2s;
}

// Animation 2 - Circle expand
.wbcom-flip-box-button.wbcom-btn-2::before {
	width: 0;
	height: 0;
	padding: 50%;
	border-radius: 50%;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%) scale(0);
	transition: transform 0.3s ease-out;
}

.wbcom-flip-box-button.wbcom-btn-2:hover::before {
	transform: translate(-50%, -50%) scale(1.5);
	width: 100%;
}

// Animation 3 - Vertical expand
.wbcom-flip-box-button.wbcom-btn-3::before {
	width: 110%;
	height: 0;
	opacity: 0;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	transition: opacity 0.25s 0.15s, height 0.25s;
}

.wbcom-flip-box-button.wbcom-btn-3:hover::before {
	opacity: 1;
	height: 110%;
	transition: opacity 0.25s, height 0.4s;
	transition-delay: 0s;
}

// Animation 4 - Horizontal expand
.wbcom-flip-box-button.wbcom-btn-4::before {
	width: 0;
	height: 110%;
	opacity: 0;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	transition: opacity 0.25s 0.15s, width 0.25s;
}

.wbcom-flip-box-button.wbcom-btn-4:hover::before {
	opacity: 1;
	width: 110%;
	transition: opacity 0.25s, width 0.4s;
	transition-delay: 0s;
}

// Animation 5 - Slide from left
.wbcom-flip-box-button.wbcom-btn-5::before {
	width: 0;
	height: 110%;
	opacity: 0;
	left: 0;
	top: 0;
	transition: opacity 0.25s 0.15s, width 0.25s;
}

.wbcom-flip-box-button.wbcom-btn-5:hover::before {
	opacity: 1;
	width: 110%;
	transition: opacity 0.25s, width 0.4s;
	transition-delay: 0s;
}

// Animation 6 - Slide from bottom
.wbcom-flip-box-button.wbcom-btn-6::before {
	width: 110%;
	height: 0;
	opacity: 0;
	left: 0;
	bottom: 0;
	transition: opacity 0.25s 0.15s, height 0.25s;
}

.wbcom-flip-box-button.wbcom-btn-6:hover::before {
	opacity: 1;
	height: 110%;
	transition: opacity 0.25s, height 0.4s;
	transition-delay: 0s;
}

// Animation 7 - Slide from right
.wbcom-flip-box-button.wbcom-btn-7::before {
	width: 0;
	height: 110%;
	opacity: 0;
	right: 0;
	top: 0;
	left: auto;
	transition: opacity 0.25s 0.15s, width 0.25s;
}

.wbcom-flip-box-button.wbcom-btn-7:hover::before {
	opacity: 1;
	width: 110%;
	transition: opacity 0.25s, width 0.4s;
	transition-delay: 0s;
}

// Animation 8 - Slide from top
.wbcom-flip-box-button.wbcom-btn-8::before {
	width: 110%;
	height: 0;
	opacity: 0;
	left: 0;
	top: 0;
	bottom: auto;
	transition: opacity 0.25s 0.15s, height 0.25s;
}

.wbcom-flip-box-button.wbcom-btn-8:hover::before {
	opacity: 1;
	height: 110%;
	transition: opacity 0.25s, height 0.4s;
	transition-delay: 0s;
}

// ============================================
// Responsive
// ============================================
@media (max-width: 600px) {
	.wbcom-flip-box-wrapper {
		max-width: 100%;
	}

	.wbcom-flip-box-front,
	.wbcom-flip-box-back {
		padding: 20px;
	}

	.wbcom-flip-box-title {
		font-size: 1.125rem;
	}

	.wbcom-flip-box-content {
		font-size: 0.875rem;
	}
}
